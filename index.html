<html>

<body>

    <h1>Welcome to Multimap!</h1>

    <!-- <select id="periodSelector" onchange="periodFunction()">
        <option value=3>Three periods</option>
        <option value=4>Four periods</option>
        <option value=5>Five periods</option>
        <option value=6>Six periods</option>
        <option value=7>Seven periods</option>
        <option value=8>Eight periods</option>
        <option value=9>Nine periods</option>
    </select> -->

    <div id="slidecontainer">
        <input type="range" min="2" max="360" value=6 class="slider" length="2" id="colorSlider">

        <p>Colors:
            <span id="colorsBox"></span>
        </p>

        <input type="range" min="0" max="90" value="60" step="1" class="slider" id="angleSlider">

        <p>Angle:
            <span id="angleBox"></span>
        </p>
        <input type="range" min="0" max="1" value="0" step="0.001" class="slider" id="deltaSlider">

        <p>Vernier :
            <span id="deltaBox"></span>
        </p>
    </div>

    <div id="canvasContainer">
        <canvas id="myCanvas" style="border:1px solid #c3c3c3;">
        </canvas>
    </div>


    </style>
    </div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>

    <script>
        var canvasDiv = document.getElementById("canvasContainer"),
            canvas = document.getElementById("myCanvas"),
            w = 800,
            h = 800,
            ctx = canvas.getContext("2d"),
            cSlider = document.getElementById("colorSlider"),
            aSlider = document.getElementById("angleSlider"),
            dSlider = document.getElementById("deltaSlider"),
            cOutput = document.getElementById("colorsBox"),
            aOutput = document.getElementById("angleBox"),
            dOutput = document.getElementById("deltaBox"),
            pMenu = document.getElementById("periodSelector"),
            colorStr,
            colors,
            period,
            delta,
            angle,
            angleStr,
            deltaStr = 0,
            hue = "",
            r = 360,
            t = 0,
            i = 1,
            c = Math.PI / 180; // Degrees to radians conversion factor

        canvas.width = w;
        canvas.height = h;
        cx = w / 2;
        cy = h / 2;

        function setParameters() {
            colorsStr = cSlider.value;
            colors = parseInt(colorsStr);
            cOutput.innerHTML = colorsStr;
    //        periodStr = pMenu.value;
    //        period = parseInt(periodStr);
            deltaStr = dSlider.value;
            delta = parseFloat(deltaStr);
            dOutput.innerHTML = deltaStr;
            angleStr = aSlider.value;
            angle = parseFloat(angleStr);
            aOutput.innerHTML = angle + delta;

        }

        function periodFunction() {
            clearScreen();
            setParameters();
            r = 360;
            t = 0;
            i = 1;
            drawMap();
        }

        cSlider.oninput = function () {
            clearScreen();
            setParameters();
            r = 360;
            t = 0;
            i = 1;
            drawMap();
        }

        aSlider.oninput = function () {
            clearScreen();
            setParameters();
            r = 360;
            t = 0;
            i = 1;
            drawMap();
        }

        dSlider.oninput = function () {
            clearScreen();
            setParameters();
            r = 360;
            t = 0;
            i = 1;
            drawMap();
        }

        function drawMap() {
            while (r > 20) {
                dx = cx + r * Math.cos(c * t);
                dy = cy + r * Math.sin(c * t);
                hue = ((360 / colors) * i).toString();
                ctx.fillStyle = "hsl(" + hue + ", 100%, 50%)";
                ctx.fillRect(dx, dy, 5, 5);
                t += angle + delta;
                i++;
                r *= 0.9999;
            }
        }

        function clearScreen() {
            ctx.clearRect(0, 0, 800, 800);
        }

        setParameters();
        drawMap();
    </script>

</body>

</html>